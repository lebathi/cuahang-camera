<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L√™ Nam - Camera, Computer & ƒê√†o T·∫°o L√°i Xe</title>
    <style>
        :root { --primary: #0033a0; --price: #d32f2f; --dark: #1a252f; }
        body { font-family: 'Segoe UI', sans-serif; background: #f8f9fa; margin: 0; }
        
        /* HEADER */
        header { 
            background: white; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; 
        }
        .logo { height: 90px; width: auto; object-fit: contain; }
        .header-right { text-align: right; }
        .slogan { font-size: 1.4em; color: var(--primary); font-weight: 800; margin: 0; text-transform: uppercase; }
        .header-info { font-size: 0.9em; margin-top: 5px; color: #444; line-height: 1.5; }

        /* SEARCH */
        .search-area { background: var(--primary); padding: 25px 20px; text-align: center; }
        #searchInput { width: 100%; max-width: 600px; padding: 12px 25px; border-radius: 30px; border: none; font-size: 16px; outline: none; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }

        /* DANH S√ÅCH S·∫¢N PH·∫®M */
        .container { display: flex; flex-wrap: wrap; justify-content: center; padding: 20px; max-width: 1300px; margin: auto; }
        .card { 
            background: white; 
            width: 280px; 
            margin: 15px; 
            border-radius: 12px; 
            overflow: hidden; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); 
            cursor: pointer; 
            transition: 0.3s; 
            border: 1px solid #eee; 
            display: flex;             /* D√πng flex ƒë·ªÉ canh ch·ªânh n·ªôi dung d·ªçc */
            flex-direction: column; 
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        
        /* --- CH·ªàNH S·ª¨A ·∫¢NH ƒê·ªÇ TH·∫§Y H·∫æT --- */
        .card img { 
            width: 100%;           /* Chi·∫øm h·∫øt chi·ªÅu ngang khung */
            height: 220px;         /* Chi·ªÅu cao c·ªë ƒë·ªãnh */
            object-fit: contain;   /* QUAN TR·ªåNG: Thu nh·ªè ·∫£nh ƒë·ªÉ v·ª´a kh√≠t khung, KH√îNG C·∫ÆT ·∫¢NH */
            background: #fff;      /* N·ªÅn tr·∫Øng cho nh·ªØng ·∫£nh kh√¥ng vu√¥ng v·ª©c */
            padding: 5px;          /* Kho·∫£ng h·ªü nh·ªè ƒë·ªÉ ·∫£nh kh√¥ng d√≠nh s√°t m√©p */
            box-sizing: border-box;
        }

        .info { padding: 15px; text-align: center; margin-top: auto; border-top: 1px solid #f9f9f9; }
        .info h3 { margin: 0; font-size: 1.1em; height: 45px; overflow: hidden; color: #333; line-height: 1.4; }
        .price { color: var(--price); font-weight: bold; font-size: 1.3em; margin: 10px 0; }
        .click-hint { font-size: 12px; color: var(--primary); text-decoration: underline; margin-top: 5px; display: block; }

        /* MODAL (POPUP) */
        .modal { display: none; position: fixed; z-index: 2000; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); justify-content: center; align-items: center; padding: 20px; }
        .modal-box { background: white; width: 100%; max-width: 900px; border-radius: 15px; display: flex; flex-wrap: wrap; position: relative; max-height: 90vh; overflow-y: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .close { position: absolute; top: 10px; right: 20px; font-size: 40px; cursor: pointer; color: #333; z-index: 10; }
        
        .m-img { flex: 1; min-width: 300px; background: #fff; display: flex; align-items: center; justify-content: center; padding: 20px; border-right: 1px solid #eee; }
        .m-img img { width: 100%; max-height: 400px; object-fit: contain; } /* ·∫¢nh trong popup c≈©ng kh√¥ng b·ªã c·∫Øt */
        
        .m-text { flex: 1.2; padding: 40px 30px; min-width: 300px; }
        .m-desc { line-height: 1.6; color: #555; white-space: pre-line; margin: 20px 0; font-size: 15px; max-height: 300px; overflow-y: auto; }
        .m-btn { background: var(--primary); color: white; display: block; text-align: center; padding: 15px; text-decoration: none; border-radius: 8px; font-weight: bold; transition: 0.2s; box-shadow: 0 4px 10px rgba(0,51,160,0.3); }
        .m-btn:hover { background: #00257a; transform: translateY(-2px); }

        /* FOOTER */
        footer { background: var(--dark); color: white; padding: 40px 5%; margin-top: 50px; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 1200px; margin: auto; }
        .footer-info p { margin: 10px 0; line-height: 1.5; }
        iframe { width: 100%; height: 300px; border: none; border-radius: 10px; }
        
        @media (max-width: 768px) { header { flex-direction: column; text-align: center; } .header-right { margin-top: 15px; } .m-img { border-right: none; border-bottom: 1px solid #eee; } }
    </style>
</head>
<body>

<header>
    <img src="Logo_LeNam.jpg" alt="Logo L√™ Nam" class="logo">
    <div class="header-right">
        <p class="slogan">L√™ Nam - Trao tr·ªçn ni·ªÅm tin, v·ªØng b∆∞·ªõc m·ªçi h√†nh tr√¨nh</p>
        <div class="header-info">
            <b>üìû 0919.005366</b> | üõ† Camera - Laptop - ƒêi·ªán gia d·ª•ng<br>
            üöó ƒê√†o t·∫°o l√°i xe A1, A, B, C, E..., b·ªï t√∫c tay l√°i
        </div>
    </div>
</header>

<div class="search-area">
    <input type="text" id="searchInput" placeholder="üîç T√¨m ki·∫øm s·∫£n ph·∫©m, d·ªãch v·ª•...">
</div>

<div class="container" id="product-list">
    <p style="text-align:center; width:100%">ƒêang t·∫£i d·ªØ li·ªáu...</p>
</div>

<div id="pModal" class="modal" onclick="if(event.target==this) this.style.display='none'">
    <div class="modal-box">
        <span class="close" onclick="document.getElementById('pModal').style.display='none'">√ó</span>
        <div class="m-img"><img id="m-img" src=""></div>
        <div class="m-text">
            <h2 id="m-name" style="margin-top:0; color:#0033a0;"></h2>
            <div id="m-price" style="color:red; font-size:1.8em; font-weight:bold; margin: 10px 0;"></div>
            <div style="height:1px; background:#eee; margin:15px 0;"></div>
            <strong>Th√¥ng tin chi ti·∫øt:</strong>
            <div id="m-desc" class="m-desc"></div>
            <a href="https://zalo.me/0919005366" target="_blank" class="m-btn">üí¨ Nh·∫Øn Zalo T∆∞ V·∫•n Ngay</a>
        </div>
    </div>
</div>

<footer>
    <div class="footer-grid">
        <div class="footer-info">
            <h3>LI√äN H·ªÜ</h3>
            <p>üè¢ <strong>C·ª≠a h√†ng L√™ Nam Camera & Computer</strong></p>
            <p>üìç 85A Nguy·ªÖn VƒÉn Ni, T√¢n An H·ªôi, C·ªß Chi, TP.HCM</p>
            <p>üìû Hotline/Zalo: <strong>0919.005366</strong></p>
            <p><i>Uy t√≠n - Ch·∫•t l∆∞·ª£ng - T·∫≠n t√¢m</i></p>
        </div>
        <div>
            <iframe src="https://maps.google.com/maps?q=85A+Nguy%E1%BB%85n+V%C4%83n+Ni,+C%E1%BB%A7+Chi,+H%E1%BB%93+Ch%C3%AD+Minh&t=&z=15&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe>
        </div>
    </div>
</footer>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAGheG_3iJiNRO5eqQXq2l1EIU2LROJmzU",
        authDomain: "cuahangcamrera.firebaseapp.com",
        databaseURL: "https://cuahangcamrera-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "cuahangcamrera"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    let allData = [];

    onValue(ref(db, 'products/'), (snapshot) => {
        const list = document.getElementById('product-list');
        list.innerHTML = "";
        
        if (!snapshot.exists()) {
            list.innerHTML = "<p style='text-align:center;width:100%'>Ch∆∞a c√≥ s·∫£n ph·∫©m.</p>";
            return;
        }

        allData = [];
        snapshot.forEach(child => {
            const p = child.val();
            p.id = child.key;
            allData.push(p);

            const price = (p.price && p.price != 0) ? Number(p.price).toLocaleString('vi-VN') + " ƒë" : "Gi√° li√™n h·ªá";
            const imgUrl = p.img || 'https://via.placeholder.com/300?text=No+Image';

            const card = document.createElement('div');
            card.className = 'card';
            card.onclick = () => {
                document.getElementById('m-name').innerText = p.name;
                document.getElementById('m-price').innerText = price;
                document.getElementById('m-desc').innerText = p.desc || "ƒêang c·∫≠p nh·∫≠t...";
                document.getElementById('m-img').src = imgUrl;
                document.getElementById('pModal').style.display = 'flex';
            };
            
            card.innerHTML = `
                <img src="${imgUrl}" alt="${p.name}">
                <div class="info">
                    <h3>${p.name}</h3>
                    <div class="price">${price}</div>
                    <span class="click-hint">B·∫•m ƒë·ªÉ xem chi ti·∫øt</span>
                </div>
            `;
            list.appendChild(card);
        });
    });

    document.getElementById('searchInput').oninput = (e) => {
        const txt = e.target.value.toLowerCase();
        const cards = document.querySelectorAll('.card');
        cards.forEach((card, index) => {
            if(allData[index]) {
                const name = allData[index].name.toLowerCase();
                card.style.display = name.includes(txt) ? 'flex' : 'none';
            }
        });
    };
</script>
</body>
</html>

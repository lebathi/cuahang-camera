<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L√™ Nam - Camera, Computer & ƒê√†o T·∫°o L√°i Xe</title>
    <style>
        :root { --primary: #0033a0; --price: #d32f2f; --dark: #1a252f; }
        body { font-family: 'Segoe UI', sans-serif; background: #f8f9fa; margin: 0; }
        
        header { background: white; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        .logo { height: 90px; width: auto; object-fit: contain; }
        .header-right { text-align: right; }
        .slogan { font-size: 1.4em; color: var(--primary); font-weight: 800; margin: 0; text-transform: uppercase; }
        .header-info { font-size: 0.9em; margin-top: 5px; color: #444; line-height: 1.5; }

        .search-area { background: var(--primary); padding: 20px; text-align: center; }
        #searchInput { width: 100%; max-width: 600px; padding: 12px 25px; border-radius: 30px; border: none; font-size: 16px; outline: none; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }

        /* --- MENU PH√ÇN LO·∫†I (FILTER) --- */
        .category-bar { display: flex; justify-content: center; gap: 10px; padding: 15px; background: white; flex-wrap: wrap; border-bottom: 1px solid #eee; }
        .filter-btn { 
            padding: 8px 20px; border: 1px solid #ddd; background: white; border-radius: 20px; cursor: pointer; 
            font-weight: 600; color: #555; transition: 0.3s;
        }
        .filter-btn:hover, .filter-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* DANH S√ÅCH S·∫¢N PH·∫®M */
        .container { display: flex; flex-wrap: wrap; justify-content: center; padding: 20px; max-width: 1300px; margin: auto; min-height: 400px; }
        .card { 
            background: white; width: 280px; margin: 15px; border-radius: 12px; overflow: hidden; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; transition: 0.3s; border: 1px solid #eee; 
            display: flex; flex-direction: column;
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        .card img { width: 100%; height: 220px; object-fit: contain; background: #fff; padding: 5px; box-sizing: border-box; }

        .info { padding: 15px; text-align: center; margin-top: auto; border-top: 1px solid #f9f9f9; }
        .info h3 { margin: 0; font-size: 1.1em; height: 45px; overflow: hidden; color: #333; line-height: 1.4; }
        .price { color: var(--price); font-weight: bold; font-size: 1.3em; margin: 10px 0; }

        /* MODAL */
        .modal { display: none; position: fixed; z-index: 2000; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); justify-content: center; align-items: center; padding: 20px; }
        .modal-box { background: white; width: 100%; max-width: 900px; border-radius: 15px; display: flex; flex-wrap: wrap; position: relative; max-height: 90vh; overflow-y: auto; }
        .close { position: absolute; top: 10px; right: 20px; font-size: 40px; cursor: pointer; color: #333; }
        .m-img { flex: 1; min-width: 300px; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .m-img img { width: 100%; max-height: 400px; object-fit: contain; }
        .m-text { flex: 1.2; padding: 40px 30px; min-width: 300px; }
        .m-btn { background: var(--primary); color: white; display: block; text-align: center; padding: 15px; text-decoration: none; border-radius: 8px; font-weight: bold; margin-top: 20px; }

        footer { background: var(--dark); color: white; padding: 40px 5%; margin-top: 50px; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 1200px; margin: auto; }
        iframe { width: 100%; height: 300px; border: none; border-radius: 10px; }
        
        @media (max-width: 768px) { header { flex-direction: column; text-align: center; } .header-right { margin-top: 15px; } }
    </style>
</head>
<body>

<header>
    <img src="Logo_LeNam.jpg" alt="Logo L√™ Nam" class="logo">
    <div class="header-right">
        <p class="slogan">L√™ Nam - Trao tr·ªçn ni·ªÅm tin, v·ªØng b∆∞·ªõc m·ªçi h√†nh tr√¨nh</p>
        <div class="header-info">
            <b>üìû 0919.005366</b> | üõ† Camera - Laptop - ƒêi·ªán gia d·ª•ng<br>
            üöó ƒê√†o t·∫°o l√°i xe A1, A, B, C, E...
        </div>
    </div>
</header>

<div class="search-area">
    <input type="text" id="searchInput" placeholder="üîç T√¨m ki·∫øm s·∫£n ph·∫©m, d·ªãch v·ª•...">
</div>

<div class="category-bar">
    <button class="filter-btn active" onclick="filter('all', this)">T·∫•t c·∫£</button>
    <button class="filter-btn" onclick="filter('camera', this)">üì∑ Camera</button>
    <button class="filter-btn" onclick="filter('computer', this)">üíª Laptop/PC</button>
    <button class="filter-btn" onclick="filter('solar', this)">‚òÄÔ∏è ƒêi·ªán NƒÉng L∆∞·ª£ng</button>
    <button class="filter-btn" onclick="filter('driving', this)">üöó ƒê√†o T·∫°o L√°i Xe</button>
</div>

<div class="container" id="product-list">
    <p style="text-align:center; width:100%">ƒêang t·∫£i d·ªØ li·ªáu...</p>
</div>

<div id="pModal" class="modal" onclick="if(event.target==this) this.style.display='none'">
    <div class="modal-box">
        <span class="close" onclick="document.getElementById('pModal').style.display='none'">√ó</span>
        <div class="m-img"><img id="m-img" src=""></div>
        <div class="m-text">
            <h2 id="m-name" style="margin-top:0; color:#0033a0;"></h2>
            <div id="m-price" style="color:red; font-size:1.8em; font-weight:bold; margin: 10px 0;"></div>
            <hr>
            <div id="m-desc" style="white-space:pre-line; color:#555; line-height:1.6"></div>
            <a href="https://zalo.me/0919005366" target="_blank" class="m-btn">üí¨ Nh·∫Øn Zalo T∆∞ V·∫•n Ngay</a>
        </div>
    </div>
</div>

<footer>
    <div class="footer-grid">
        <div>
            <h3>LI√äN H·ªÜ</h3>
            <p>üè¢ <strong>C·ª≠a h√†ng L√™ Nam Camera & Computer</strong></p>
            <p>üìç 85A Nguy·ªÖn VƒÉn Ni, T√¢n An H·ªôi, C·ªß Chi, TP.HCM</p>
            <p>üìû Hotline/Zalo: <strong>0919.005366</strong></p>
        </div>
        <div><iframe src="https://maps.google.com/maps?q=85A+Nguy%E1%BB%85n+V%C4%83n+Ni,+C%E1%BB%A7+Chi,+H%E1%BB%93+Ch%C3%AD+Minh&t=&z=15&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe></div>
    </div>
</footer>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const config = { apiKey: "AIzaSyAGheG_3iJiNRO5eqQXq2l1EIU2LROJmzU", authDomain: "cuahangcamrera.firebaseapp.com", databaseURL: "https://cuahangcamrera-default-rtdb.asia-southeast1.firebasedatabase.app", projectId: "cuahangcamrera" };
    const app = initializeApp(config);
    const db = getDatabase(app);
    let allData = [];
    let currentCat = 'all';

    onValue(ref(db, 'products/'), (s) => {
        allData = [];
        if(s.exists()) s.forEach(c => { const p = c.val(); p.id = c.key; allData.push(p); });
        render(allData);
    });

    function render(data) {
        const list = document.getElementById('product-list');
        list.innerHTML = "";
        if(data.length === 0) { list.innerHTML = "<p>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o.</p>"; return; }
        
        data.forEach(p => {
            const price = (p.price && p.price != 0) ? Number(p.price).toLocaleString('vi-VN') + " ƒë" : "Gi√° li√™n h·ªá";
            const imgUrl = p.img || 'https://via.placeholder.com/300?text=No+Image';
            
            const card = document.createElement('div');
            card.className = 'card';
            card.onclick = () => {
                document.getElementById('m-name').innerText = p.name;
                document.getElementById('m-price').innerText = price;
                document.getElementById('m-desc').innerText = p.desc || "";
                document.getElementById('m-img').src = imgUrl;
                document.getElementById('pModal').style.display = 'flex';
            };
            card.innerHTML = `<img src="${imgUrl}"><div class="info"><h3>${p.name}</h3><div class="price">${price}</div><span style="font-size:12px;color:#0033a0">Xem chi ti·∫øt</span></div>`;
            list.appendChild(card);
        });
    }

    // H√†m l·ªçc theo danh m·ª•c
    window.filter = (cat, btn) => {
        currentCat = cat;
        // ƒê·ªïi m√†u n√∫t
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // L·ªçc d·ªØ li·ªáu
        if(cat === 'all') render(allData);
        else render(allData.filter(p => p.category === cat));
    };

    // T√¨m ki·∫øm
    document.getElementById('searchInput').oninput = (e) => {
        const txt = e.target.value.toLowerCase();
        let filtered = allData.filter(p => p.name.toLowerCase().includes(txt));
        if(currentCat !== 'all') filtered = filtered.filter(p => p.category === currentCat);
        render(filtered);
    };
</script>
</body>
</html>

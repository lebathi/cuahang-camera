<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hitech Camera & Computer</title>
    <style>
        :root { --primary: #0068ff; --price: #d32f2f; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; }
        header { background: var(--primary); color: white; text-align: center; padding: 40px 20px; }
        .search-box { max-width: 600px; margin: -25px auto 20px; padding: 0 15px; }
        #searchInput { width: 100%; padding: 15px 25px; border-radius: 50px; border: none; box-shadow: 0 4px 15px rgba(0,0,0,0.2); font-size: 16px; outline: none; }
        .container { display: flex; flex-wrap: wrap; justify-content: center; max-width: 1200px; margin: auto; padding: 20px; }
        .card { background: white; width: 280px; margin: 15px; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.08); transition: 0.3s; position: relative; }
        .card:hover { transform: translateY(-8px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        .card img { width: 100%; height: 220px; object-fit: cover; cursor: zoom-in; }
        .info { padding: 15px; }
        .info h3 { margin: 0; font-size: 1.1em; color: #222; height: 45px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
        .price { color: var(--price); font-weight: bold; font-size: 1.4em; margin: 12px 0; }
        .zalo-btn { display: block; background: var(--primary); color: white; text-align: center; padding: 12px; text-decoration: none; border-radius: 10px; font-weight: bold; transition: 0.3s; }
        .zalo-btn:hover { opacity: 0.9; }
        
        /* Modal xem ·∫£nh */
        #imgModal { display: none; position: fixed; z-index: 999; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; }
        #imgModal img { max-width: 90%; max-height: 90%; border-radius: 5px; }
    </style>
</head>
<body>

<header>
    <h1>Hitech Camera & Computer</h1>
    <p>Gi·∫£i ph√°p c√¥ng ngh·ªá - Uy t√≠n h√†ng ƒë·∫ßu</p>
</header>

<div class="search-box">
    <input type="text" id="searchInput" placeholder="üîç T√¨m ki·∫øm t√™n s·∫£n ph·∫©m b·∫°n c·∫ßn...">
</div>

<div class="container" id="product-list">
    <p>ƒêang t·∫£i danh s√°ch s·∫£n ph·∫©m...</p>
</div>

<div id="imgModal" onclick="this.style.display='none'"><img id="modalImg"></div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAGheG_3iJiNRO5eqQXq2l1EIU2LROJmzU",
        authDomain: "cuahangcamrera.firebaseapp.com",
        databaseURL: "https://cuahangcamrera-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "cuahangcamrera",
        storageBucket: "cuahangcamrera.firebasestorage.app",
        messagingSenderId: "306094872086",
        appId: "1:306094872086:web:3fcd59e474557a8cb50737"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    let allProducts = [];

    // H√†m ph√≥ng to ·∫£nh
    window.zoomImg = (src) => {
        document.getElementById('modalImg').src = src;
        document.getElementById('imgModal').style.display = 'flex';
    };

    onValue(ref(db, 'products/'), (snapshot) => {
        allProducts = [];
        snapshot.forEach(child => {
            allProducts.push({ id: child.key, ...child.val() });
        });
        renderProducts(allProducts);
    });

    function renderProducts(products) {
        const list = document.getElementById('product-list');
        list.innerHTML = products.length ? "" : "<p>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m ph√π h·ª£p.</p>";
        
        products.forEach(p => {
            const price = Number(p.price).toLocaleString('vi-VN') + " ƒë";
            list.innerHTML += `
                <div class="card">
                    <img src="${p.img || 'https://via.placeholder.com/300'}" onclick="zoomImg(this.src)">
                    <div class="info">
                        <h3>${p.name}</h3>
                        <p style="font-size: 0.9em; color: #666; height: 40px; overflow: hidden;">${p.desc}</p>
                        <div class="price">${price}</div>
                        <a href="https://zalo.me/${p.zalo}" target="_blank" class="zalo-btn">üí¨ T∆∞ v·∫•n Zalo</a>
                    </div>
                </div>`;
        });
    }

    // X·ª≠ l√Ω t√¨m ki·∫øm
    document.getElementById('searchInput').oninput = (e) => {
        const text = e.target.value.toLowerCase();
        const filtered = allProducts.filter(p => p.name.toLowerCase().includes(text));
        renderProducts(filtered);
    };
</script>
</body>
</html>
